<%- include('components/header', { title: title }) %>

<%- include('components/flash') %>

<div class="container mt-4">
  <h2 class="mb-3 d-flex align-items-center">
    <% if (flokk?.buemerkeImage) { %>
      <img src="<%= flokk.buemerkeImage %>" alt="Buemerke" class="mr-2 me-2 rounded-circle" style="height: 40px; width: 40px; object-fit: cover;">
      <% } %>
    <%= flokk?.flokkName || "Ukjent Flokk" %>
  </h2>

  <div class="card mb-4">
    <div class="card-body">
      <p><strong>Registrert av:</strong> <%= flokk?.owner?.name || "Ikke tilgjengelig" %></p>
      <p> <%= flokk?.owner?.email || "Ikke tilgjengelig" %></p>
      <p> <%= flokk?.owner?.phone || "Ikke tilgjengelig" %></p>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-body">
      <p><strong>Series:</strong> <%= flokk?.series || "Ikke tilgjengelig" %></p>
      <p><strong>Buemerke:</strong> <%= flokk?.buemerkeName || "Ikke tilgjengelig" %></p>
    </div>
  </div>

  <% if (beiteArea) { %>
    <div class="card mb-4">
      <div class="card-header">
        <h5>Beiteområde</h5>
      </div>
      <div class="card-body">
        <p><strong>Navn:</strong> <%= beiteArea.primaryArea || "Ikke oppgitt" %></p>
        <p><strong>Sted:</strong> <%= beiteArea.counties || "Ikke oppgitt" %></p>
      </div>
    </div>
  <% } else { %>
    <div class="alert alert-warning">Ingen beiteområde assosiert med denne flokken.</div>
  <% } %>

  <h3 class="mb-3">Reinsdyr i flokken:</h3>
  <% if (reinsdyr.length > 0) { %>
    <ul class="list-group mb-4">
      <% reinsdyr.forEach(function(rein) { %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <strong><%= rein.name %></strong> 
          <span class="badge badge-secondary">Serienummer: <%= rein.serialNumber %></span>
  
          <% if (user && user.id == flokk.owner._id) { %>
            <form action="/reindeer/delete/<%= rein._id %>" method="POST" class="ml-3">
              <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Er du sikker på at du vil slette dette reinsdyret?')">
                Slett
              </button>
            </form>
          <% } %>
  
        </li>
      <% }) %>
    </ul>
  <% } else { %>
    <div class="alert alert-info">Ingen reinsdyr i denne flokken.</div>
  <% } %>
  
</div>

<%- include('components/footer') %>
